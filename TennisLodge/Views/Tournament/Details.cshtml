@model TennisLodge.Web.ViewModels.Tournament.TournamentDetailsViewModel
@using static TennisLodge.GCommon.ApplicationConstants

@{
    ViewData["Title"] = Model.Name;
}

<h2 style="margin-bottom: 2rem;">@Model.Name</h2>

@if (TempData["ErrorMessage"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <i class="bi bi-exclamation-triangle me-2"></i>
        @TempData["ErrorMessage"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (!string.IsNullOrEmpty(Model.ImageUrl))
{
    <div class="mb-4">
        <img src="@Model.ImageUrl" alt="@Model.Name" class="img-fluid" style="max-height: 300px; width: auto; object-fit: contain;" />
    </div>
}

<div class="mb-4" style="max-width: 600px;">
    <p><strong>Description:</strong></p>
    <p>@Model.Description</p>

    <p><strong>Location:</strong> @Model.Location</p>
    <p><strong>Surface:</strong> @Model.Surface</p>
    <p><strong>Dates:</strong> @Model.StartDate.ToString(AppDateFormat) - @Model.EndDate.ToString(AppDateFormat)</p>
    <p><strong>Category:</strong> @Model.CategoryName</p>
    <p><strong>Organizer:</strong> @Model.Organizer</p>
</div>

<div>
    <a asp-action="Index" class="btn btn-secondary me-2">Back to list</a>

    @if (User.Identity?.IsAuthenticated == true)
    {
        @if (Model.IsInFavorites)
        {
            <form asp-controller="Favorite" asp-action="Remove" asp-route-id="@Model.Id" method="post" class="d-inline">
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-danger">Remove from Favorites</button>
            </form>
        }
        else
        {
            <form asp-controller="Favorite" asp-action="Add" asp-route-id="@Model.Id" method="post" class="d-inline">
                @Html.AntiForgeryToken()
                <button type="submit" class="btn btn-success">Save to Favorites</button>
            </form>
        }
    }
</div>
